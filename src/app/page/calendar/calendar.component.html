<app-header
  title="Agenda de atendimentos"
  buttonFunction="Marcar consulta"
  icon="fal fa-calendar"
  (onClick)="openRegistrationModal()">
  >
</app-header>

<form [formGroup]="calendarForm" class="mt-7 flex items-end gap-4 w-full">
  <div class="flex flex-col flex-1">
    <label class="mb-1">Paciente:</label>
    <input type="text" formControlName="patientName" placeholder="nome do paciente"
           class="input input-bordered py-3 px-4 w-full"/>
  </div>

  <div class="flex flex-col flex-1">
    <label class="mb-1">Profissional:</label>
    <input type="text" placeholder="nome do profissional" formControlName="professionalName"
           class="input input-bordered py-3 px-4 w-full"/>
  </div>

  <div class="flex flex-col flex-1">
    <label class="mb-1">Data inicial:</label>
    <input type="date" placeholder="data inicial" formControlName="starDate"
           class="input input-bordered py-3 px-4 w-full"/>
  </div>

  <div class="flex flex-col flex-1">
    <label class="mb-1">Data final:</label>
    <input type="date" placeholder="data final" formControlName="endDate"
           class="input input-bordered py-3 px-4 w-full"/>
  </div>

  <div class="flex flex-col">
    <label class="invisible">.</label>
    <button class="btn btn-primary py-3 px-6" (click)="findSchedules()">
      <i class="fal fa-search mr-2"></i> Buscar
    </button>
  </div>
</form>

<p class="mt-6">Período: {{ calendarData.period.start }} - {{ calendarData.period.end }}</p>
<div class="w-full">
  <table class="table table-compact table-zebra w-full">
    <thead class="pt-1">
    <tr style="background-color: #b4caf8;">
      <th>Paciente</th>
      <th>Profissional</th>
      <th>Data/Hora</th>
      <th>Tipo</th>
      <th>Convênio</th>
      <th>Situação</th>
      <th>Ações</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let data of calendarData.schedules">
      <td>
        <div>
          <p>{{ data.patient.length > 1 ? "GRUPO" : data.patient[0].name }}</p>
          <p>{{ data.patient.length > 1 ? "" : data.patient[0].age + ' anos' }}</p>
        </div>
      </td>
      <td>
        <div>
          <p>{{ data.professional.name }}</p>
          <p>{{ data.professional.specialty }}</p>
        </div>
      </td>
      <td>
        <div>
          <p>{{ data.date }}</p>
          <p style="font-size: 2em">{{ data.time }}</p>
        </div>
      </td>
      <td>{{ data.type }}</td>
      <td>
        <div>
          <p>{{ data.convenio ? data.convenio.name : "------" }}</p>
          <p>{{ data.convenio ? data.convenio.type : "" }}</p>
        </div>
      </td>
      <td>
        <!--                <div class="badge badge-primary badge-outline badge-calendar" >-->
        <div class="badge-primary badge badge-outline badge-calendar" [ngClass]="{
  'badge-primary': data.status === 'agendado',
  'badge-error': data.status === 'cancelado',
  'status-realizada': data.status === 'realizado',
  'status-vago': data.status === 'vago',
}">
          {{ data.status }}
        </div>
      </td>
      <td style="display: flex; justify-content: space-around">
        <button class="btn btn-accent ">
          <i class="fal fa-check" style="color: #fff"></i>
        </button>
        <button class="btn btn-primary">
          <i class="fal fa-eye" style="color: #fff"></i>
        </button>
        <button class="btn btn-error">
          <i class="fal fa-trash" style="color: #fff"></i>
        </button>
      </td>
    </tr>

    </tbody>
  </table>
</div>

<div>
  <br>
  <br>
  <br>
  <br>
  <br>
</div>



